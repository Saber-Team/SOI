__d("Backbone",["underscore","jquery"],function(e,t,n,i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=t("underscore"),s=t("jquery"),a=e,u=i,l=a.Backbone,c=Array.prototype.slice;u.VERSION="1.3.3",u.$=s,u.noConflict=function(){return a.Backbone=l,this},u.emulateHTTP=!1,u.emulateJSON=!1;var d=function(e,t,n){switch(e){case 1:return function(){return o[t](this[n])};case 2:return function(e){return o[t](this[n],e)};case 3:return function(e,i){return o[t](this[n],h(e,this),i)};case 4:return function(e,i,r){return o[t](this[n],h(e,this),i,r)};default:return function(){var e=c.call(arguments);return e.unshift(this[n]),o[t].apply(o,e)}}},f=function(e,t,n){o.each(t,function(t,i){o[i]&&(e.prototype[i]=d(t,i,n))})},h=function(e,t){return o.isFunction(e)?e:o.isObject(e)&&!t._isModel(e)?p(e):o.isString(e)?function(t){return t.get(e)}:e},p=function(e){var t=o.matches(e);return function(e){return t(e.attributes)}},g=u.Events={},m=/\s+/,v=function J(e,t,n,i,s){var a,u=0;if(n&&"object"===("undefined"==typeof n?"undefined":r(n))){void 0!==i&&"context"in s&&void 0===s.context&&(s.context=i);for(a=o.keys(n);u<a.length;u++)t=J(e,t,a[u],n[a[u]],s)}else if(n&&m.test(n))for(a=n.split(m);u<a.length;u++)t=e(t,a[u],i,s);else t=e(t,n,i,s);return t};g.on=function(e,t,n){return y(this,e,t,n)};var y=function(e,t,n,i,r){if(e._events=v(b,e._events||{},t,n,{context:i,ctx:e,listening:r}),r){var o=e._listeners||(e._listeners={});o[r.id]=r}return e};g.listenTo=function(e,t,n){if(!e)return this;var i=e._listenId||(e._listenId=o.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),s=r[i];if(!s){var a=this._listenId||(this._listenId=o.uniqueId("l"));s=r[i]={obj:e,objId:i,id:a,listeningTo:r,count:0}}return y(e,t,n,this,s),this};var b=function(e,t,n,i){if(n){var r=e[t]||(e[t]=[]),o=i.context,s=i.ctx,a=i.listening;a&&a.count++,r.push({callback:n,context:o,ctx:o||s,listening:a})}return e};g.off=function(e,t,n){return this._events?(this._events=v(x,this._events,e,t,{context:n,listeners:this._listeners}),this):this},g.stopListening=function(e,t,n){var i=this._listeningTo;if(!i)return this;for(var r=e?[e._listenId]:o.keys(i),s=0;s<r.length;s++){var a=i[r[s]];if(!a)break;a.obj.off(t,n,this)}return this};var x=function(e,t,n,i){if(e){var r,s=0,a=i.context,u=i.listeners;if(t||n||a){for(var l=t?[t]:o.keys(e);s<l.length;s++){t=l[s];var c=e[t];if(!c)break;for(var d=[],f=0;f<c.length;f++){var h=c[f];n&&n!==h.callback&&n!==h.callback._callback||a&&a!==h.context?d.push(h):(r=h.listening,r&&0===--r.count&&(delete u[r.id],delete r.listeningTo[r.objId]))}d.length?e[t]=d:delete e[t]}return e}for(var p=o.keys(u);s<p.length;s++)r=u[p[s]],delete u[r.id],delete r.listeningTo[r.objId]}};g.once=function(e,t,n){var i=v(w,{},e,t,o.bind(this.off,this));return"string"==typeof e&&null==n&&(t=void 0),this.on(i,t,n)},g.listenToOnce=function(e,t,n){var i=v(w,{},t,n,o.bind(this.stopListening,this,e));return this.listenTo(e,i)};var w=function(e,t,n,i){if(n){var r=e[t]=o.once(function(){i(t,r),n.apply(this,arguments)});r._callback=n}return e};g.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;t>i;i++)n[i]=arguments[i+1];return v(T,this._events,e,void 0,n),this};var T=function(e,t,n,i){if(e){var r=e[t],o=e.all;r&&o&&(o=o.slice()),r&&E(r,i),o&&E(o,[t].concat(i))}return e},E=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}};g.bind=g.on,g.unbind=g.off,o.extend(u,g);var C=u.Model=function(e,t){var n=e||{};t||(t={}),this.cid=o.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{});var i=o.result(this,"defaults");n=o.defaults(o.extend({},i,n),i),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};o.extend(C.prototype,g,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return o.clone(this.attributes)},sync:function(){return u.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return o.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!o.iteratee(e,this)(this.attributes)},set:function(e,t,n){if(null==e)return this;var i;if("object"===("undefined"==typeof e?"undefined":r(e))?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;var s=n.unset,a=n.silent,u=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=o.clone(this.attributes),this.changed={});var c=this.attributes,d=this.changed,f=this._previousAttributes;for(var h in i)t=i[h],o.isEqual(c[h],t)||u.push(h),o.isEqual(f[h],t)?delete d[h]:d[h]=t,s?delete c[h]:c[h]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!a){u.length&&(this._pending=n);for(var p=0;p<u.length;p++)this.trigger("change:"+u[p],this,c[u[p]],n)}if(l)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,o.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,o.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!o.isEmpty(this.changed):o.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?o.clone(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,n={};for(var i in e){var r=e[i];o.isEqual(t[i],r)||(n[i]=r)}return o.size(n)?n:!1},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:function(e){e=o.extend({parse:!0},e);var t=this,n=e.success;return e.success=function(i){var r=e.parse?t.parse(i,e):i;return t.set(r,e)?(n&&n.call(e.context,t,i,e),void t.trigger("sync",t,i,e)):!1},X(this,e),this.sync("read",this,e)},save:function(e,t,n){var i;null==e||"object"===("undefined"==typeof e?"undefined":r(e))?(i=e,n=t):(i={})[e]=t,n=o.extend({validate:!0,parse:!0},n);var s=n.wait;if(i&&!s){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;var a=this,u=n.success,l=this.attributes;n.success=function(e){a.attributes=l;var t=n.parse?a.parse(e,n):e;return s&&(t=o.extend({},i,t)),t&&!a.set(t,n)?!1:(u&&u.call(n.context,a,e,n),void a.trigger("sync",a,e,n))},X(this,n),i&&s&&(this.attributes=o.extend({},l,i));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=i);var d=this.sync(c,this,n);return this.attributes=l,d},destroy:function V(e){e=e?o.clone(e):{};var t=this,n=e.success,i=e.wait,V=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(r){i&&V(),n&&n.call(e.context,t,r,e),t.isNew()||t.trigger("sync",t,r,e)};var r=!1;return this.isNew()?o.defer(e.success):(X(this,e),r=this.sync("delete",this,e)),i||V(),r},url:function(){var e=o.result(this,"urlRoot")||o.result(this.collection,"url")||U();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},o.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=o.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,o.extend(t,{validationError:n})),!1):!0}});var _={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};f(C,_,"attributes");var N=u.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,o.extend({silent:!0},t))},k={add:!0,remove:!0,merge:!0},S={add:!0,remove:!1},A=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,r=Array(e.length-n),o=t.length;for(i=0;i<r.length;i++)r[i]=e[i+n];for(i=0;o>i;i++)e[i+n]=t[i];for(i=0;i<r.length;i++)e[i+o+n]=r[i]};o.extend(N.prototype,g,{model:C,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return u.sync.apply(this,arguments)},add:function(e,t){return this.set(e,o.extend({merge:!1},t,S))},remove:function(e,t){t=o.extend({},t);var n=!o.isArray(e);e=n?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),n?i[0]:i},set:function Y(e,t){if(null!=e){t=o.extend({},k,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var n=!o.isArray(e);e=n?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),0>i&&(i+=this.length+1);var r,s,Y=[],a=[],u=[],l=[],c={},d=t.add,f=t.merge,h=t.remove,p=!1,g=this.comparator&&null==i&&t.sort!==!1,m=o.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){r=e[s];var v=this.get(r);if(v){if(f&&r!==v){var y=this._isModel(r)?r.attributes:r;t.parse&&(y=v.parse(y,t)),v.set(y,t),u.push(v),g&&!p&&(p=v.hasChanged(m))}c[v.cid]||(c[v.cid]=!0,Y.push(v)),e[s]=v}else d&&(r=e[s]=this._prepareModel(r,t),r&&(a.push(r),this._addReference(r,t),c[r.cid]=!0,Y.push(r)))}if(h){for(s=0;s<this.length;s++)r=this.models[s],c[r.cid]||l.push(r);l.length&&this._removeModels(l,t)}var b=!1,x=!g&&d&&h;if(Y.length&&x?(b=this.length!==Y.length||o.some(this.models,function(e,t){return e!==Y[t]}),this.models.length=0,A(this.models,Y,0),this.length=this.models.length):a.length&&(g&&(p=!0),A(this.models,a,null==i?this.length:i),this.length=this.models.length),p&&this.sort({silent:!0}),!t.silent){for(s=0;s<a.length;s++)null!=i&&(t.index=i+s),r=a[s],r.trigger("add",r,this,t);(p||b)&&this.trigger("sort",this,t),(a.length||l.length||u.length)&&(t.changes={added:a,removed:l,merged:u},this.trigger("update",this,t))}return n?e[0]:e}},reset:function(e,t){t=t?o.clone(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,o.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,o.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,o.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return c.apply(this.models,arguments)},get:function(e){return null!=e?this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]:void 0},has:function(e){return null!=this.get(e)},at:function(e){return 0>e&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var n=t.length;return o.isFunction(t)&&(t=o.bind(t,this)),1===n||o.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=o.extend({parse:!0},e);var t=e.success,n=this;return e.success=function(i){var r=e.reset?"reset":"set";n[r](i,e),t&&t.call(e.context,n,i,e),n.trigger("sync",n,i,e)},X(this,e),this.sync("read",this,e)},create:function(e,t){t=t?o.clone(t):{};var n=t.wait;if(e=this._prepareModel(e,t),!e)return!1;n||this.add(e,t);var i=this,r=t.success;return t.success=function(e,t,o){n&&i.add(e,o),r&&r.call(o.context,e,t,o)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?o.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var s=this.modelId(r.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=o,r.trigger("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return n},_isModel:function(e){return e instanceof C},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}});var j={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};f(N,j,"models");var H=u.View=function(e){this.cid=o.uniqueId("view"),o.extend(this,o.pick(e,L)),this._ensureElement(),this.initialize.apply(this,arguments)},D=/^(\S+)\s*(.*)$/,L=["model","collection","el","id","attributes","className","tagName","events"];o.extend(H.prototype,g,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof u.$?e:u.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=o.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var n=e[t];if(o.isFunction(n)||(n=this[n]),n){var i=t.match(D);this.delegate(i[1],i[2],o.bind(n,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(o.result(this,"el"));else{var e=o.extend({},o.result(this,"attributes"));this.id&&(e.id=o.result(this,"id")),this.className&&(e["class"]=o.result(this,"className")),this.setElement(this._createElement(o.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),u.sync=function(e,t,n){var i=M[e];o.defaults(n||(n={}),{emulateHTTP:u.emulateHTTP,emulateJSON:u.emulateJSON});var r={type:i,dataType:"json"};if(n.url||(r.url=o.result(t,"url")||U()),null!=n.data||!t||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){r.type="POST",n.emulateJSON&&(r.data._method=i);var s=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",i),s?s.apply(this,arguments):void 0}}"GET"===r.type||n.emulateJSON||(r.processData=!1);var a=n.error;n.error=function(e,t,i){n.textStatus=t,n.errorThrown=i,a&&a.call(n.context,e,t,i)};var l=n.xhr=u.ajax(o.extend(r,n));return t.trigger("request",t,l,n),l};var M={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};u.ajax=function(){return u.$.ajax.apply(u.$,arguments)};var q=u.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},O=/\((.*?)\)/g,P=/(\(\?)?:\w+/g,F=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(q.prototype,g,{initialize:function(){},route:function(e,t,n){o.isRegExp(e)||(e=this._routeToRegExp(e)),o.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var i=this;return u.history.route(e,function(r){var o=i._extractParameters(e,r);i.execute(n,o,t)!==!1&&(i.trigger.apply(i,["route:"+t].concat(o)),i.trigger("route",t,o),u.history.trigger("route",i,t,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,t){return u.history.navigate(e,t),this},_bindRoutes:function(){if(this.routes){this.routes=o.result(this,"routes");for(var e,t=o.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(I,"\\$&").replace(O,"(?:$1)?").replace(P,function(e,t){return t?e:"([^/?]+)"}).replace(F,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return o.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var R=u.History=function(){this.handlers=[],this.checkUrl=o.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},$=/^[#\/]|\s+$/g,B=/^\/+|\/+$/g,W=/#.*$/;R.started=!1,o.extend(R.prototype,g,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace($,"")},start:function(e){if(R.started)throw new Error("Backbone.history has already been started");if(R.started=!0,this.options=o.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(B,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,i=n.insertBefore(this.iframe,n.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var r=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};return this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),R.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),o.some(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})):!1},navigate:function(e,t){if(!R.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;(""===e||"?"===e.charAt(0))&&(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace(W,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),u.history=new R;var z=function(e,t){var n,i=this;return n=e&&o.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},o.extend(n,i,t),n.prototype=o.create(i.prototype,e),n.prototype.constructor=n,n.__super__=i.prototype,n};C.extend=N.extend=q.extend=H.extend=R.extend=z;var U=function(){throw new Error('A "url" property or function must be specified')},X=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};a.Backbone=u});