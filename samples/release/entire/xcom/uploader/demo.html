<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>web uploader</title>
    <link rel="stylesheet" href="./uploader.css">
    <link rel="stylesheet" href="../imageviewer/imageviewer.css">
</head>
<body>
<div> <button id="edit">Edit</button> <button id="get">get result</button></div>
<div class="o-webuploader" id="fileList">
    <div class="o-thumbnail o-thumbnail-view" data-order="0">
        <img src="">
        <div class="o-remove" style="display: none;"></div>
        <div class="o-hover" style="">
            <span><div class="view-origin"></div></span><span><div class="re-upload"></div></span>
        </div>
    </div>
    <div class="o-thumbnail o-upload-done" data-order="1">
        <img src="">
        <div class="o-remove" style="display: none;"></div>
        <div class="o-hover" style="">
            <span><div class="view-origin"></div></span><span><div class="re-upload"></div></span>
        </div>
    </div>

    <div class="o-thumbnail o-upload-done" data-order="2">
        <img src="">
        <div class="o-remove" style="display: none;"></div>
        <div class="o-hover" style="">
            <span><div class="view-origin"></div></span><span><div class="re-upload"></div></span>
        </div>
    </div>

    <div id="filePicker" class="o-filepicker">
        <div class="up-icon"></div>
        <div class="up-text">上传文件</div>
    </div>

    <div class="o-error">error message</div>
</div>

<script src="../../xlib/js/jQuery.js"></script>
<script src="./webuploader.js"></script>
<script src="../../xlib/js/kernel.js"></script>
<!--<script src="/js/uploader.js"></script>-->

<script>
    require(['./uploader'], function (Uploader) {
        ///*
        var upload = new Uploader({
                    swf: './uploader.swf',
                    //runtimeOrder: 'flash,html5',
                    server: 'http://webuploader.duapp.com/server/fileupload.php',
                    fileVal: 'ufile',
                    pick: {
                        id: '#filePicker',
                        multiple: true
                    },
                    fileNumExist: 3,
                    accept: '',
                    fileNumLimit: 5
                }),
            data = {
                0: {"data":{"filehash":"/1438255024182-avatar-1.jpg","filename":"avatar-1.jpg"}},
                1: {"data":{"filehash":"/1438255024182-avatar-1.jpg","filename":"avatar-1.jpg"}},
                2: {"data":{"filehash":"/1438255024182-avatar-1.jpg","filename":"avatar-1.jpg"}}
            };

        upload.init();


        $('#edit').on('click', function () {
            alert('now can edit the thumbnail');
            upload.initExist($('.o-webuploader'), data);

        });

        $('.o-thumbnail').on('mouseenter', function () {
            $(this).children('.o-remove').show()
                    .end().children('.o-hover').show();
        }).on('mouseleave', function () {
            $(this).children('.o-remove').hide()
                    .end().children('.o-hover').hide();
        });

        $('#get').on('click', function () {
            console.log(upload.getRes());
        });
    })
</script>
</body>
</html>