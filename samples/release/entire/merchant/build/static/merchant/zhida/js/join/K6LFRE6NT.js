define("vJGdS",[],function(){"use strict";var $=window.jQuery;function EventEmitter(){}function on(eventName,handler,ctx){if(!this.handlerManager){this.handlerManager={}}if(!this.handlerManager[eventName]){this.handlerManager[eventName]=[]}this.handlerManager[eventName].push({handler:handler,ctx:ctx});return this}function trigger(eventName,args){if(!this.handlerManager){this.handlerManager={};return this}if(!this.handlerManager[eventName]){return this}args=Array.prototype.slice.call(arguments,1);var handles=this.handlerManager[eventName];for(var i=0;i<handles.length;++i){handles[i].handler.apply(handles[i].ctx,args)}}EventEmitter.inject=function(obj){obj.on=on;obj.trigger=trigger};EventEmitter.bind=function(Class){$.extend(Class.prototype,{on:on,trigger:trigger})};return EventEmitter});
define("giiX1",["vJGdS"],function(EventEmitter){"use strict";var domString='<div class="o-imageviewer-wrapper">'+'<div class="o-imageviewer-mask"></div>'+'<img class="o-imageviewer-pic" />'+"</div>";var $viewerWrapper,$pic,$mask;var ImageViewer={init:function(){if(!$viewerWrapper){$viewerWrapper=$(domString);$pic=$viewerWrapper.children(".o-imageviewer-pic");$mask=$viewerWrapper.children(".o-imageviewer-mask");$(document.body).append($viewerWrapper);$mask.on("click",function(){ImageViewer.trigger("close",[$pic.attr("src")]);$viewerWrapper.hide()})}},open:function(uri){var imageObj=new Image;imageObj.src=uri;imageObj.onload=function(){var w=imageObj.width,h=imageObj.height,ratio=w/960>=h/600?w/960:h/600;ratio=ratio<1?1:ratio;$pic.css({"margin-left":"-"+w/ratio/2+"px","margin-top":"-"+h/ratio/2+"px"});$pic.attr("src",uri);$viewerWrapper.show()}},close:function(){$viewerWrapper.hide()},destroy:function(){this.handlerManager=null;$mask.off();$viewerWrapper.remove();$viewerWrapper=null}};EventEmitter.inject(ImageViewer);return ImageViewer});
define("merchant:common:msg",[],function(){"use strict";return{defaultMsg:"啊哦…我好像出错了！",zhida:{500:"啊哦…我好像出错了！",400:"您还没有登录",90:"请先发送验证码",91:"验证码不正确",100:"请提供需要修改的APP_ID",101:"创建应用发生错误",102:"啊哦…我好像出错了！",103:"您没有应用访问权限",104:"审核中无法修改",110:"直达号还没有上线哦",111:"啊哦…我好像出错了！",112:"授权用户无法修改站点",301:"该直达站点已经上线",303:"站点所有权验证失败",304:"站点提交过不能暂存",305:"站点下线验证码有误"},crm:{157110:"分组名称重复",157113:"分组数量超出上限"},deal:{1001e3:"请求成功",1001003:"缺少必要的参数",1001004:"参数不合法",1001005:"网络连接失败",1001008:"登录账户过期，请重新登录",1001010:"没有权限，请联系管理员开通权限或重新登录",1001011:"您查询的条件下没有数据",1002101:"无权查看当前数据",1002102:"无权查看当前数据",1002103:"无权查看当前数据",1002104:"网络繁忙，请稍后重试",1002105:"生成支付码失败，请刷新当前页面",1002106:"转出失败，请重新提交转出申请",1002107:"商户结算配置错误不允许转出",1002108:"订单状态错误",1002109:"查询商户资质信息失败"}}});
define("merchant:common:api",[],function(){"use strict";var apiDomain="http://zmike86.zhida.baidu.com:8080/";return{crm:{areaList:"http://map.baidu.com/?qt=sub_area_list",customerList:apiDomain+"zhidahao/v1/crm/customer/list",customerDetail:apiDomain+"zhidahao/v1/crm/customer/detail",groupList:apiDomain+"zhidahao/v1/crm/customer/group/list",updateGroup:apiDomain+"zhidahao/v1/crm/customer/group/update",deleteGroup:apiDomain+"zhidahao/v1/crm/customer/group/delete",createGroup:apiDomain+"zhidahao/v1/crm/customer/group/create",updateRemark:apiDomain+"zhidahao/v1/crm/customer/interpose",addToGroup:apiDomain+"zhidahao/v1/crm/customer/group/bind"},deal:{listPage:apiDomain+"sh/deposit",infoPage:apiDomain+"sh/deposit/detail",sign:apiDomain+"sh/deposit/updateiset",list:apiDomain+"sh/deposit/list",info:apiDomain+"sh/deposit/info",rollout:apiDomain+"sh/deposit/out",recharge:apiDomain+"sh/deposit/in",pay:apiDomain+"sh/deposit/order",getCode:apiDomain+"sh/deposit/order/qr",cancel:apiDomain+"sh/deposit/order/cancel",check:apiDomain+"sh/deposit/order/check"},zhida:{getQua:apiDomain+"sh/zhida/qua/get",updateQua:apiDomain+"sh/zhida/qua/update",addQua:apiDomain+"sh/zhida/qua/add",storeQua:apiDomain+"rest/2.0/zhidahao/v1/agent/submitstorequainfo",saveQua:apiDomain+"rest/2.0/zhidahao/v1/agent/savestorequainfo",sendSmsVcode:apiDomain+"rest/2.0/zhidahao/v1/agent/sendsmsvcode",verifySmsVcode:apiDomain+"rest/2.0/zhidahao/v1/agent/verifysmsvcode",sendEmailVcode:apiDomain+"rest/2.0/zhidahao/v1/agent/sendemailvcode",verifyEmailVcode:apiDomain+"rest/2.0/zhidahao/v1/agent/verifyemailvcode",phoneVcode:apiDomain+"sh/zhida/send/vcode",emailVcode:apiDomain+"sh/zhida/send/email_vcode",checkPhoneCode:apiDomain+"sh/zhida/check/vcode",checkEmailCode:apiDomain+"sh/zhida/check/email_vcode",offlineZhida:apiDomain+"sh/zhida/offline",submitZhidaSite:apiDomain+"sh/zhida/set_site/submit",saveZhidaSite:apiDomain+"sh/zhida/set_site/save",verifyZhidaSite:apiDomain+"sh/zhida/verify_site",getZhidaInfo:apiDomain+"sh/zhida/info",updateZhidaInfo:apiDomain+"sh/zhida/update",addZhidaInfo:apiDomain+"sh/zhida/add",addQuaAndZhida:apiDomain+"sh/zhida/qua/zhida/add",getVcode:apiDomain+"sh/vcode/create",checkVcode:apiDomain+"sh/vcode/verify"}}});
define("pGpSk",[],function(){"use strict";var tpl='<div class="o-inputfield" data-name="{{name}}">'+'<div class="box">'+'<input type="text" value="{{value}}" name="{{name}}" maxlength="{{maxLength}}"/>'+"<i><em>0</em>/{{maxLength}}</i>"+"</div>"+'<div class="error">{{errmsg}}</div>'+'<div class="tip">{{texttip}}</div>'+"</div>";return{template:tpl,re:/(?:\{\{([^}]*)}})/g}});
define("_3YXC",["merchant:common:api"],function(api){"use strict";function requestPhoneQRcode(phone){$.post(api.zhida.phoneVcode,{phone:String(phone)},function(data){},"json")}function requestEmailQRcode(email){$.post(api.zhida.emailVcode,{email:String(email)},function(data){},"json")}function checkEmailVcode(email,vcode){return $.post(api.zhida.checkEmailCode,{email:String(email),vcode:String(vcode)},"json")}function checkPhoneVcode(phone,vcode){return $.post(api.zhida.checkPhoneCode,{phone:String(phone),vcode:String(vcode),bdstoken:GlobalInfo.bdstoken},"json")}return{requestPhoneQRcode:requestPhoneQRcode,requestEmailQRcode:requestEmailQRcode,checkEmailVcode:checkEmailVcode,checkPhoneVcode:checkPhoneVcode}});
define("RzrMf",[],function(){"use strict";var Wi=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1];var ValideCode=[1,0,10,9,8,7,6,5,4,3,2];var specialChars={validate:function(val){var re=/[\s,!@#\$%\^&\*\(\)\-\+=_\[\]\{};:'"\?\.<>！￥（）－＋｛｝【】‘“，’”？：；。`·《》]/;if(re.test(val)){return{result:false,msg:"请不要使用特殊字符"}}else{return{result:true,msg:""}}}};var illegalCharWithBracket={validate:function(val){var re=/[\s,!@#\$%\^&\*\+=_\[\]\{};:'"\?\.<>！￥－＋｛｝【】‘“，’”？：；。`·《》]/;if(re.test(val)){return{result:false,msg:"请不要使用特殊字符"}}else{return{result:true,msg:""}}}};var length=function(min,max){return{validate:function(val){if(val.length>max){return{result:false,msg:"长度超过了"+max+"个字符"}}else if(val.length<min){return{result:false,msg:"长度不得小于"+min+"个字符"}}else{return{result:true,msg:""}}}}};var id={validate:function(val){var idCard=$.trim(val);var result;if(idCard.length===15){result=isValidityBrithBy15IdCard(idCard)}else if(idCard.length===18){var a_idCard=idCard.split("");result=isValidityBrithBy18IdCard(idCard)&&isTrueValidateCodeBy18IdCard(a_idCard)}else{result=false}return{result:result,msg:result?"":"输入不是合法身份证号"}}};var required={validate:function(val){var ret=$.trim(val)!=="";return{result:ret,msg:ret?"":"此项不能为空"}}};var email={validate:function(val){var re=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;if(re.test(val)){return{result:true,msg:""}}else{return{result:false,msg:"不是正确的邮箱格式"}}}};var positiveInteger={validate:function(val){var re=/^[1-9]\d*$/;if(re.test(val)){return{result:true,msg:""}}else{return{result:false,msg:"必须是大于0的整数"}}}};var nonNegativeInteger={validate:function(val){var re=/^[1-9]\d*$|0$/;if(re.test(val)){return{result:true,msg:""}}else{return{result:false,msg:"必须是大于或等于0的整数"}}}};var positiveNumber={validate:function(val){var re=/^[1-9]\d*(\.\d*[1-9])?$|0\.\d*[1-9]$/;if(re.test(val)){return{result:true,msg:""}}else{return{result:false,msg:"必须是大于0的数字"}}}};var nonNegativeNumber={validate:function(val){var re=/^[1-9]\d*(\.\d*[1-9])?$|0\.\d*[1-9]$|0$/;if(re.test(val)){return{result:true,msg:""}}else{return{result:false,msg:"必须是大于或者等于0的数字"}}}};var phone={validate:function(val){var re=/^0?1[3|4|5|8][0-9]\d{8}$/;if(re.test(val)){return{result:true,msg:""}}else{return{result:false,msg:"不是正确的手机号码"}}}};var queryWord={validate:function(val){var limit=4;var byteLen=String(val).replace(/[^\x00-\xff]/g,"ci").length;var len=val.length;var isEn=len>=limit/2&&byteLen>=limit/2;var isCN=byteLen>limit;var ret=!val||(isEn||isCN)&&byteLen<=20;if(ret){return{result:true,msg:""}}else{return{result:false,msg:"请输入2-10个汉字或2-20个字母/数字"}}}};var website={validate:function(val){var re=new RegExp("^(https?://)?"+"([0-9a-zA-Z_!~*'()-]+\\.)*"+"([0-9a-zA-Z][0-9a-zA-Z-]{0,61})?[0-9a-zA-Z]\\."+"[a-zA-Z]{2,6}"+"(:[0-9]{1,4})?"+"((/?)|"+"(/[0-9a-zA-Z_!~*'().;?:@&=+$,%#-]+)+/?)$");if(re.test(val)){return{result:true,msg:""}}else{return{result:false,msg:"不是正确的站点地址格式"}}}};function isTrueValidateCodeBy18IdCard(a_idCard){var sum=0;if(a_idCard[17].toLowerCase()==="x"){a_idCard[17]=10}for(var i=0;i<17;i++){sum+=Wi[i]*a_idCard[i]}var valCodePosition=sum%11;return a_idCard[17]==ValideCode[valCodePosition]}function isValidityBrithBy18IdCard(idCard18){var year=idCard18.substring(6,10);var month=idCard18.substring(10,12);var day=idCard18.substring(12,14);var temp_date=new Date(year,parseFloat(month)-1,parseFloat(day));return!(temp_date.getFullYear()!=parseFloat(year)||temp_date.getMonth()!=parseFloat(month)-1||temp_date.getDate()!=parseFloat(day))}function isValidityBrithBy15IdCard(idCard15){var year=idCard15.substring(6,8);var month=idCard15.substring(8,10);var day=idCard15.substring(10,12);var temp_date=new Date(year,parseFloat(month)-1,parseFloat(day));return!(temp_date.getYear()!=parseFloat(year)||temp_date.getMonth()!=parseFloat(month)-1||temp_date.getDate()!=parseFloat(day))}return{specialChars:specialChars,illegalCharWithBracket:illegalCharWithBracket,positiveInteger:positiveInteger,nonNegativeInteger:nonNegativeInteger,positiveNumber:positiveNumber,nonNegativeNumber:nonNegativeNumber,id:id,required:required,website:website,email:email,phone:phone,queryWord:queryWord,length:length}});
define("Jn00n",[],function(){"use strict";function AutoSave(callback,context){this.callback=callback;this.context=context||null}$.extend(AutoSave.prototype,{init:function(host){var me=this;host.onBlurInternal=function(){var ret;var val=this.$input.val();if(this.validateOnBlur){ret=this.validate()}if(ret&&val!==this.defaultValue){this.setDefaultValue(val);me.callback.call(me.context,host)}}}});return AutoSave});
define("J4uXr",["pGpSk","vJGdS"],function(tpl,EventEmitter){"use strict";var $=window.jQuery;var defaultObj={maxLength:30,value:"",texttip:"",errmsg:"",name:""};function InputField(config){if(config&&config.container){this.init(config)}}$.extend(InputField.prototype,{init:function(config){this.$container=$(config.container);this.$input=this.$container.find("input");this.$tip=this.$container.find("input+i");this.$errortip=this.$container.find(".error");this.validateOnBlur=!!config.validateOnBlur;this.keyName=config.keyName||this.$input.attr("name")||this.$container.attr("data-name");this.defaultValue=this.$input.val();this.maxLength=config.maxLength||30;this.validator=config.validator||null;this.apply(config.plugins||[]);this.bind();this.updateCharNumber()},apply:function(plugins){for(var i=0;i<plugins.length;++i){plugins[i].init(this)}},bind:function(){this.$input.on("keyup",this.updateCharNumber.bind(this));this.$input.blur(this.onBlurInternal.bind(this))},updateCharNumber:function(){if(this.$tip){this.$tip.html("<em>"+this.$input.val().length+"</em>/"+this.maxLength)}},validate:function(){if(!this.validator){return true}var ret=true;var validator;var val=this.$input.val();if($.isArray(this.validator)){for(var i=0;i<this.validator.length;++i){validator=this.validator[i];ret=validator.validate(val);if(!ret.result){break}}}else{ret=this.validator.validate(val)}if(!ret.result){this.setErrorMsg(ret.msg).showError()}else{this.setErrorMsg("").hideError()}return ret.result},getValue:function(){return this.getValueInternal()},getKeyValue:function(){return{name:this.keyName,value:this.getValue()}},setValue:function(val){this.$input.val(String(val));this.updateCharNumber()},setDefaultValue:function(val){this.defaultValue=String(val)},getDefaultValue:function(){return this.getDefaultValueInternal()},createDom:function(data){data=data||defaultObj;var html=tpl.template.replace(tpl.re,function($0,$1,position,str){return data[$1]});var frag=document.createDocumentFragment();frag.innerHTML=html;return frag.firstChild},showError:function(){this.$container.addClass("error");return this},hideError:function(){this.$container.removeClass("error");return this},setErrorMsg:function(msg){this.$errortip.text(msg);return this},destroy:function(){this.handlerManager=null;this.$input.off();this.$tip.off();this.$errortip.off();this.$container.remove();this.$input=null;this.$tip=null;this.$errortip=null;this.$container=null},onBlurInternal:function(){if(this.validateOnBlur){this.validate()}},getValueInternal:function(){return this.$input.val()},getDefaultValueInternal:function(){return this.defaultValue}});EventEmitter.bind(InputField);return InputField});
define("m0pEn",[],function(){"use strict";function Encoding(){}$.extend(Encoding.prototype,{init:function(host){host.getValueInternal=function(){return encodeURIComponent(this.$input.val())};host.getDefaultValueInternal=function(){return encodeURIComponent(this.defaultValue)}}});return Encoding});
define("Y_OWB",["merchant:common:api","merchant:common:msg","giiX1"],function(api,msg,imageViewer){"use strict";var $=window.jQuery;var isOnline=Number(GlobalInfo.status)>=4;function inject(uploader){uploader.initFormAttrInternal=function(config){this.$container=$(config.container);this.$thumbnail=this.$container.find(".o-thumbnail");this.$picker=this.$container.find(".o-filepicker");this.$sample=this.$container.parent().find(".sample");this.$quote=this.$container.parent().find(".tip em");this.$error=this.$container.parent().find(".error");this.keyName=config.keyName;this.keyValue=config.keyValue||""};uploader.getKeyValue=function(){return{name:this.keyName,value:this.keyValue}};uploader.validate=function(){var ret=!!this.keyValue;if(ret){this.$error.hide()}else{this.$error.show()}return ret};uploader.setStateInternal=function(imgUrl){if(imgUrl){this.$picker.hide();this.$thumbnail.find("img").attr("src",imgUrl);this.$thumbnail.on("mouseenter",function(){$(this).children(".o-remove").show().end().children(".o-hover").show()}).on("mouseleave",function(){$(this).children(".o-remove").hide().end().children(".o-hover").hide()});this.initExist(this.$thumbnail,{0:{data:{filehash:imgUrl},errno:0}})}else{this.$thumbnail.remove()}};uploader.bindInternal=function(){var me=this;if(this.$quote){this.$quote.hover(function(){me.$sample.show()},function(){me.$sample.hide()})}function post(){var postData={bdstoken:GlobalInfo.bdstoken};var kv=me.getKeyValue();postData["data["+kv.name+"]"]=kv.value;$.post(api.zhida.updateQua,postData).done(function(res){if(res.error_code){me.$error.show();me.$error.text(msg[res.error_code]||res.error_msg)}else{me.$error.hide();me.$error.text("")}})}this.uploader.on("uploadSuccess",function(file,response){if(response.error_code){me.$error.show();me.$error.text(msg[response.error_code]||response.error_msg)}else{me.$error.hide();me.keyValue=response.data.filehash;if(!isOnline){post()}}});this.on("remove",function(uploader){uploader.keyValue=""});this.$container.delegate(".view-origin","click",function(){imageViewer.init();var imgurl=me.response.data?me.response.data.filehash:me.existData[0].data.filehash;imageViewer.open(imgurl,1e5)})}}return inject});
define("Yjji0",["giiX1","vJGdS"],function(imageViewer,EventEmitter){"use strict";var $=jQuery;function Uploader(conf){var ratio=window.devicePixelRatio||1,defaultConf={swf:"/static/merchant/common/swf/uploader.swf",auto:true,resize:false,fileVal:"ufile",fileNumLimit:5,fileSizeLimit:10*1024*1024,accept:{title:"Images",extensions:"jpg,jpeg,png",mimeTypes:"image/*"},thumb:{width:120*ratio,height:90*ratio,type:"image/jpeg"},duplicate:true,fileNumExist:0,errImgPath:"./uploader-error.png",formData:{bdstoken:"",from_hash:1,upload_type:"light_app_icon"}};this.conf=$.extend(true,{},defaultConf,conf);this.fileNumCount=conf.fileNumExist||0;this.ele=$(conf.pick&&conf.pick.id||conf.pick);this.response={};this.existData={};this.tempRemove={};this.$replaceTarget="";this.singleUploader="";this.uploader="";this.status=true}$.extend(Uploader.prototype,{init:function(){this.uploader=WebUploader.create(this.conf);this.bindUploadEvents();this.uploader.trigger("toggleUploaderBtn")},initReUploader:function(){var that=this;if(that.singleUploader){that.singleUploader.reset()}else{that.singleUploader=WebUploader.create($.extend(true,{},this.conf,{pick:"",fileNumLimit:1}));that.bindReUploadEvents()}},initExist:function($target,data){var that=this,$target=$target.closest(".o-webuploader")||$(document.body);$target.find(".o-remove").off().on("click",function(){$(this).closest(".o-thumbnail").remove();that.fileNumCount?that.fileNumCount--:that.fileNumCount=0;delete that.existData[$(this).closest(".o-thumbnail").data("order")];that.showUploader();that.trigger("remove",that)});$target.find(".o-hover .re-upload").each(function(inx,ele){that.addReUploadButton(ele)});$target.find(".o-thumbnail").removeClass("o-thumbnail-view").addClass("o-upload-done").off().on("mouseenter",function(e){var $that=$(this);$that.children(".o-remove").show().end().children(".o-hover").show();if(that.isFlash()&&that.isIE(9)){$that.children(".o-hover").css({left:"auto"})}}).on("mouseleave",function(e){var $that=$(this);$that.children(".o-remove").hide();if(that.isFlash()&&that.isIE(9)){$that.children(".o-hover").css({left:"2000px"})}else{$that.children(".o-hover").hide()}});$target.find(".o-hover .view-origin").off().on("click",function(e){var $img=$(this).closest(".o-thumbnail").children("img");imageViewer.init();imageViewer.open($img.attr("src"))});that.existData=data},render:function($item,isNew){var that=this,tpl="";if(isNew){tpl=['<div class="o-mask"></div>','<div class="o-progress-text">等待上传</div>','<div class="o-progress-bar">',"<p></p>","</div>",'<div class="o-remove"></div>','<div class="o-hover o-hover-disabled">','<span><div class="view-origin"></div></span>','<span><div class="re-upload"></div></span>',"</div>"].join("");$item.append(tpl);$item.insertBefore($(this.ele))}else{if(!$item.children(".o-mask").length){tpl+='<div class="o-mask"></div>'}if(!$item.children(".o-progress-bar").length){tpl+='<div class="o-progress-text">等待上传</div>'+'<div class="o-progress-bar"><p></p><div>'}if(!$item.children(".o-hover").length){tpl+='<div class="o-hover o-hover-disabled">'+'<span><div class="view-origin"></div></span>'+'<span><div class="re-upload"></div></span>'+"</div>"}$item.append(tpl);$item.removeClass("o-upload-error o-upload-done").children(".o-mask").show().end().children(".o-hover").addClass("o-hover-disabled").end().children(".o-progress-text").removeClass("o-progress-icon").text("等待上传").show().end().children(".o-progress-bar").show().children("p").css("width",0)}},addReUploadButton:function(id,innerHTML){var that=this;if(!that.singleUploader){that.initReUploader()}that.singleUploader.addButton({id:id,innerHTML:innerHTML||"",multiple:false})},makeThumbnail:function(file,$item,isNew){var that=this,$img=$item.children("img");that.uploader.makeThumb(file,function(err,src){if(err){$img.replaceWith("<span>不能预览<span>");return}that.replaceExistThumb(file);$img.attr("src",src);that.bindThumbEvents($item,file);that.uploader.trigger("toggleUploaderBtn")})},bindThumbEvents:function($item,file){var that=this;$item.off().on("mouseenter",function(e){var $that=$(this);if($that.children(".o-hover-disabled").length)return;$that.children(".o-remove").show().end().children(".o-hover").show();if(that.isFlash()&&that.isIE(9)){$that.children(".o-hover").css({left:"auto"})}}).on("mouseleave",function(e){var $that=$(this);$that.children(".o-remove").hide();if(that.isFlash()&&that.isIE(9)){$that.children(".o-hover").css({left:"2000px"})}else{$that.children(".o-hover").hide()}});$item.children(".o-remove").off().on("click",function(e){that.removeQueueFile(file);$item.remove();that.showUploader()});if(that.isFlash()){$item.find(".re-upload").off().on("mouseup",function(e){console.log("re-upload");that.tempRemove.file=file;that.tempRemove.res=that.response[file.id]})}else{$item.find(".re-upload").off().on("click",function(e){that.tempRemove.file=file;that.tempRemove.res=that.response[file.id]})}$item.find(".view-origin").off().on("click",function(e){imageViewer.init();imageViewer.open(that.response[file.id].data.filehash)})},bindUploadEvents:function(){var that=this;that.uploader.on("beforeFileQueued",function(file){var $refer=file.source._refer;if(file.size>that.conf.fileSizeLimit){that.uploader.trigger("error","Q_EXCEED_SIZE_LIMIT");return false}if($refer.closest(".o-thumbnail").length){that.$replaceTarget=$refer.closest(".o-thumbnail")}else{that.$replaceTarget=""}if(that.fileNumCount>=that.conf.fileNumLimit){that.uploader.trigger("error","Q_EXCEED_NUM_LIMIT");return false}});that.uploader.on("fileQueued",function(file){var $item,isNew;that.fileNumCount++;if(that.$replaceTarget){$item=that.$replaceTarget;that.makeThumbnail(file,$item)}else{$item=$('<div id="'+file.id+'" class="o-thumbnail"> <img> </div>');that.makeThumbnail(file,$item,true);isNew=true}that.render($item,isNew);that.status=false});that.uploader.on("filesQueued",function(files){});that.uploader.on("fileDequeued",function(file){});that.uploader.on("uploadProgress",function(file,percentage){var $item=$("#"+file.id),$text=$item.children(".o-progress-text"),$bar=$item.find(".o-progress-bar p");$text.text(percentage*100+"%");$bar.css("width",percentage*100+"%")});that.uploader.on("uploadSuccess",function(file,response){var $item=$("#"+file.id),$reUpload=$item.find(".re-upload");if(response.data&&response.data.filehash){$item.addClass("o-upload-done").children(".o-progress-text").addClass("o-progress-icon").text("").end().children(".o-progress-bar").hide();setTimeout(function(){$item.children(".o-mask").hide().end().children(".o-progress-text").hide().end().children(".o-hover").removeClass("o-hover-disabled")},1e3);if(!$reUpload.hasClass("webuploader-container")){that.addReUploadButton($reUpload)}that.response[file.id]=response}else{that.uploader.trigger("uploadError",file,response.data)}});that.uploader.on("uploadError",function(file,reason){var $item=$("#"+file.id),$reUpload=$item.find(".re-upload");that.showError("文件上传错误: "+reason);$item.addClass("o-upload-error").children("img").attr("src",that.conf.errImgPath).next(".o-mask").hide().next(".o-progress-text").hide().next(".o-progress-bar").hide().nextAll(".o-hover").removeClass("o-hover-disabled");if(!$reUpload.hasClass("webuploader-container")){that.addReUploadButton($reUpload)}});that.uploader.on("error",function(type){switch(type){case"Q_EXCEED_NUM_LIMIT":{that.showError("选择的图片过多，超出部分自动忽略");break}case"Q_EXCEED_SIZE_LIMIT":{that.showError("选择的图片尺寸过大，自动忽略");break}case"Q_TYPE_DENIED":{that.showError("选择的文件格式不符合要求，请确认后选择");break}case"Q_FILE_SIZE_WRONG":{that.showError("图片尺寸不符合要求，请重新选择");break}}});that.uploader.on("uploadFinished",function(){that.tempRemove={};that.status=true});that.uploader.on("toggleUploaderBtn",function(){that.fileNumCount>=that.conf.fileNumLimit?that.hideUploader():that.showUploader()})},removeQueueFile:function(file,removeFromQueue){this.fileNumCount--;this.response[file.id]&&delete this.response[file.id];removeFromQueue?this.uploader.removeFile(file,true):this.uploader.removeFile(file)},bindReUploadEvents:function(){var that=this;that.singleUploader.on("beforeFileQueued",function(file){if(file.size>that.conf.fileSizeLimit){that.uploader.trigger("error","Q_EXCEED_SIZE_LIMIT");return false}if(that.tempRemove.file){that.removeQueueFile(that.tempRemove.file,true)}else{that.fileNumCount>0?that.fileNumCount--:that.fileNumCount=0}that.uploader.addFiles(file);return false})},showError:function(text){var $err=$(".o-error");if(!$err.length){$err=$('<div class="o-error"></div>').appendTo(".o-webuploader")}$err.text(text);$err.css("margin-left",-$err.width()/2).show();setTimeout(function(){$err.hide()},2*1e3)},showUploader:function(){var that=this;if(that.isFlash()&&that.isIE(9)){this.ele.css({position:"relative",left:"auto"}).show()}else{this.ele.show()}},hideUploader:function(){var that=this;if(that.isFlash()&&that.isIE(9)){this.ele.css({position:"absolute",left:"2000px"}).show()}else{this.ele.hide()}},isIE:function(version){return navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.split(";")[1].replace(/[ ]/g,"")=="MSIE"+version+".0"},isFlash:function(){var result="";return function(){if(result!==""){return result}return result=$(".o-webuploader").find("object").length}()},replaceExistThumb:function(file){var that=this;if(that.$replaceTarget){var $item=that.$replaceTarget;$item.attr("id",file.id);if($item.data("order")>=0){delete that.existData[$item.data("order")];$item.data("order",-1)}that.$replaceTarget=""}},getRes:function(){var that=this,res=[];$.each(that.response,function(idx,ele){res.push(ele)});$.each(that.existData,function(idx,ele){res.push(ele)});return res},getStatus:function(){return this.status}});EventEmitter.bind(Uploader);return Uploader});
define("VutBd",["J4uXr","Jn00n","RzrMf","merchant:common:api","_3YXC"],function(InputField,AutoSave,validator,api,service){"use strict";var $=window.jQuery;function ticker($dom){$dom.addClass("btn-disabled");function loop(){counter--;if(counter===-1){$dom.text("重新发送");$dom.removeClass("btn-disabled");$dom=null;return}$dom.text("("+counter+")秒");timer=setTimeout(loop,1e3)}var counter=60;var timer=setTimeout(loop,1e3)}function QRField(config){this.$container=$(config.container);this.$change=null;this.$view=null;this.$edit=null;this.$text=null;this.$getQR=null;this.valuefield=null;this.qrcodefield=null;this.autoSave=!!config.autoSave;this.validateType=config.validateType||"required";this.isSending=false;this.inValidating=false;this.validaPromisedObj=null;this.state=0}$.extend(QRField.prototype,{init:function(value){this.$view=this.$container.find(".view");this.$text=this.$view.find("div");this.$change=this.$view.find("span");this.$edit=this.$container.find(".edit");this.$getQR=this.$edit.find(".btn-30");this.valuefield=new InputField({container:this.$container.find(".o-inputfield")[0],validator:[validator.required,validator[this.validateType]],validateOnBlur:true});this.qrcodefield=new InputField({container:this.$container.find(".o-inputfield")[1],validator:validator.required,validateOnBlur:true});this.bind();this.setState(value?QRField.State.VIEW:QRField.State.EDIT);this.setText(value)},getValue:function(){if(this.state===QRField.State.VIEW){return null}return this.valuefield.getValue()},getKeyValue:function(){if(this.state===QRField.State.VIEW){return null}return this.valuefield.getKeyValue()},setValue:function(val){this.valuefield.setValue(val)},setDefaultValue:function(val){this.valuefield.setDefaultValue(val)},setText:function(txt){var txt=String(txt);if(this.$text){this.$text.text(txt)}},setState:function(value){if(value===QRField.State.EDIT){this.$view.hide();this.$edit.show();this.state=QRField.State.EDIT}else if(value===QRField.State.VIEW){this.$edit.hide();this.$view.show();this.state=QRField.State.VIEW}},bind:function(){var me=this;this.$change.click(function(){me.setState(QRField.State.EDIT)});this.$getQR.click(function(){if(me.valuefield.validate()&&!me.$getQR.hasClass("btn-disabled")){me.isSending=true;if(me.validateType==="email"){service.requestEmailQRcode(me.getValue())}else if(me.validateType==="phone"){service.requestPhoneQRcode(me.getValue())}ticker(me.$getQR);me.isSending=false}});this.qrcodefield.$input.blur(this.checkVcode.bind(this))},checkVcode:function(){if(this.qrcodefield.validate()){this.inValidating=true;if(this.validateType==="email"){this.validaPromisedObj=service.checkEmailVcode(this.valuefield.getValue(),this.qrcodefield.getValue());this.validaPromisedObj.done(this.checkCallback.bind(this))}else if(this.validateType==="phone"){this.validaPromisedObj=service.checkPhoneVcode(this.valuefield.getValue(),this.qrcodefield.getValue());this.validaPromisedObj.done(this.checkCallback.bind(this))}}},checkCallback:function(res){this.inValidating=false;if(res.error_code){this.qrcodefield.setErrorMsg("不合法的验证码");this.qrcodefield.showError()}else{this.qrcodefield.setErrorMsg("");this.qrcodefield.hideError();debugger;this.setText(res.data);this.setState(QRField.State.VIEW)}},validate:function(){if(this.state===QRField.State.VIEW){return{result:1,data:this.$text.text()}}if(!this.valuefield.validate()){return{error_code:1,error_msg:(this.validateType==="email"?"邮箱":"手机号码")+"格式不正确"}}if(!this.qrcodefield.validate()){return{error_code:1,error_msg:"验证码不能为空"}}if(this.inValidating){return this.validaPromisedObj}if(this.validateType==="email"){return service.checkEmailVcode(this.valuefield.getValue(),this.qrcodefield.getValue())}else if(this.validateType==="phone"){return service.checkPhoneVcode(this.valuefield.getValue(),this.qrcodefield.getValue())}},unbind:function(){this.$change.off();this.$getQR.off()},destroy:function(){this.unbind()}});QRField.State={VIEW:0,EDIT:1};return QRField});
define("gac0A",["J4uXr","Jn00n","m0pEn","RzrMf","merchant:common:api","merchant:common:msg"],function(InputField,AutoSave,Encoding,validator,api,msg){"use strict";var $=window.jQuery;var $container;var inputfield;function getValue(){return inputfield.getValue()}function getKeyValue(){return inputfield.getKeyValue()}function setValue(val){inputfield.setValue(val)}function setDefaultValue(val){inputfield.setDefaultValue(val)}function setState(orgType){if(orgType==="1"){$container.find("label").text("企业名称：");$("#company_name").attr("placeholder","请输入营业执照注册号上的企业名称");$container.find(".tip").text('个体工商户请填"字号名称", 无名称的填写"无"')}else if(orgType==="2"){$container.find("label").text("组织名称：");$("#company_name").attr("placeholder","请输入组织机构代码证上的组织名称");$container.find(".tip").text("")}}function validate(){if(inputfield){return inputfield.validate()}else{return false}}function init(orgType,isOnline){$container=$(".f-companyName");setState(orgType);inputfield=new InputField({container:$(".f-companyName .o-inputfield"),maxLength:100,validator:[validator.required,validator.specialChars],validateOnBlur:true,plugins:isOnline?[new Encoding]:[new AutoSave(autoSaveCallback),new Encoding]})}function autoSaveCallback(){var postData={bdstoken:GlobalInfo.bdstoken};var kv=getKeyValue();postData["data["+kv.name+"]"]=kv.value;$.post(api.zhida.updateQua,postData).done(function(res){if(res.error_code){inputfield.setErrorMsg(msg[res.error_code]||"返回错误");inputfield.showError()}else{inputfield.setErrorMsg("");inputfield.hideError()}})}return{init:init,setState:setState,getKeyValue:getKeyValue,getValue:getValue,setValue:setValue,setDefaultValue:setDefaultValue,validate:validate}});
define("sL67K",["vJGdS"],function(EventEmitter){"use strict";var $=window.jQuery;var $container;var $orgType;var orgType="1";function init(orgType){$container=$(".step-1 .f-orgType");$orgType=$("#org_type");bind();orgType=String(orgType)||"1";$container.find("[data-value="+orgType+"]").click()}function getValue(){return orgType}function getKeyValue(){return{name:"org_type",value:orgType}}function bind(){$orgType.delegate("span","click",function(e){var oldValue=orgType;var type=$(e.target).attr("data-value");if(type!==orgType){$orgType.find("span").removeClass("actived");$orgType.find("[data-value="+type+"]").addClass("actived");orgType=type;exports.trigger("valuechange",{oldValue:oldValue,newValue:orgType})}})}var exports={init:init,getValue:getValue,getKeyValue:getKeyValue};EventEmitter.inject(exports);return exports});
define("KJyx0",[],function(){"use strict";var $=window.jQuery;var $container;var $content;function init(msg){$container=$(".step-1 .warning");$content=$container.find("p");$content.html(msg)}function show(){$container.show()}function hide(){$container.hide()}return{init:init,show:show,hide:hide}});
define("dWD46",[],function(){"use strict";var tpl='<div class="o-textarea" data-name="{{name}}">'+'<textarea type="text" value="{{value}}" name="{{name}}" maxlength="{{maxLength}}" draggable="false">'+"</textarea>"+"<i><em>0</em>/{{maxLength}}</i>"+'<div class="error">{{errmsg}}</div>'+'<div class="tip">{{texttip}}</div>'+"</div>";return{template:tpl,re:/(?:\{\{([^}]*)}})/g}});
define("XpVb1",["require","exports","module"],function(require,exports,module){"use strict";var $=window.jQuery;var $container;var $content;function init(msg){$container=$(".step-2 .warning");$content=$container.find("p");$content.html(msg)}function show(){$container.show()}function hide(){$container.hide()}module.exports={init:init,show:show,hide:hide}});
define("kek0p",["vJGdS"],function(EventEmitter){"use strict";var $=jQuery;function Popup(){this.tpl=['<div class="popup">','<div class="popup-container">','<div class="popup-title">裁切图片 <span class="popup-close cancel">X</span></div>','<div class="popup-body">','<div class="popup-img"></div>',"</div>",'<div class="popup-footer">','<button class="btn-blue btn-38 btn-upload">确认</button>','<button class="btn-gray btn-38 btn-cancel cancel">取消</button>',"</div>","</div>","</div>"].join("");this.$popup=""}$.extend(Popup.prototype,{init:function(){this.render()},render:function(){if(!this.$popup){this.$popup=$(this.tpl).appendTo(document.body);this.bindEvents()}return this},show:function(){this.$popup.show();return this},hide:function(){this.$popup.hide();return this},bindEvents:function(){var that=this,$cancel=that.$popup.find(".cancel");$cancel.on("click",function(e){that.hide()});return this},destroy:function(){this.getUploadBtn().off();this.$popup.remove()},getImgDom:function(){return this.$popup.find(".popup-img")},getUploadBtn:function(){return this.$popup.find(".btn-upload")},setTitle:function(title){this.$popup.find(".popup-title").html(title);return this}});function LogoUpload(conf){var opts={url:"/v3/upload",imageSize:{minWidth:200,minHeight:200},accept:"image/*",paramName:"ufile",maxSize:FileAPI.MB*10,elements:{preview:{el:".logo-preview",width:90,height:90}},pick:"",extensions:"jpg,jpeg,png,gif",errImgPath:"./logo-error.png",text:"上传LOGO"};this.tpl=['<div class="o-logo">','<div class="logo-pick">','<div class="logo-browse  js-fileapi-wrapper">','<div class="up-icon"></div>','<div class="up-text">'+(conf.text||"上传LOGO")+"</div>",'<input type="file" name="files" accept="image/*">',"</div>",'<div class="logo-uploading">','<div class="logo-overlay"></div>','<div class="progress-text">等待上传</div>','<div class="progress-bar">','<p class="bar"></p>',"</div>","</div>","</div>",'<div class=""></div>','<div class="logo-preview"></div>',"</div>"].join("");this.$logo="";this.opts=$.extend(true,opts,conf);this.data="";this.flag=false}$.extend(LogoUpload.prototype,{init:function(url){var that=this;this.popup=new Popup;this.defualtLogo=url;this.render();this.bindEvents();this.$logo.fileapi($.extend(true,{},this.opts,{onSelect:function(evt,ui){that.onSelect(evt,ui)},onBeforeUpload:function(evt,uploadInfo){that.onBeforeUpload(evt,uploadInfo)},onUpload:function(evt,uploadInfo){that.onUpload(evt,uploadInfo)},onProgress:function(evt,uploadInfo){that.onProgress(evt,uploadInfo)},onFileComplete:function(evt,uploadInfo){that.onFileComplete(evt,uploadInfo)},filterFn:function(file,info){return that.filterFn(file,info)}}));this.renderInitLogo()},render:function(){this.$logo=$(this.tpl);if(this.defualtLogo){this.$logo.find(".up-icon").hide().next(".up-text").hide()}this.$logo.appendTo(this.opts.pick||document.body);return this},renderInitLogo:function(){var that=this;if(that.defualtLogo){that.$logo.children(".logo-preview").append('<img alt="LOGO缩略图" src="'+that.defualtLogo+'">').show().data("render",true);that.flag=true}},bindEvents:function(){var that=this,$preview=that.$logo.children(".logo-preview"),$browse=that.$logo.find(".logo-browse");$browse.on("mouseenter",function(){$(this).addClass("logo-browse-hover")}).on("mouseleave",function(){$(this).removeClass("logo-browse-hover")});that.$logo.on("mouseenter",function(e){if($preview.data("render")&&that.flag){$preview.addClass("logo-preview-hover")}}).on("mouseleave",function(){$preview.removeClass("logo-preview-hover")});if(that.isIE(9)){$('div[id^="_fileapi"]').on("mouseenter",function(e){if($preview.data("render")&&that.flag){$preview.addClass("logo-preview-hover")}$browse.addClass("logo-browse-hover")}).on("mouseleave",function(){$preview.removeClass("logo-preview-hover");$browse.removeClass("logo-browse-hover")})}},filterFn:function(file,info){var that=this,reg=/\.([0-9a-z]+)(?:[\?#]|$)/i,extension=file.name.match(reg)[1];if(that.opts.extensions.indexOf(extension)==-1){that.showError("选择的图片格式不正确，请确认后重试");return false}return true},onSelect:function(evt,ui){var that=this,file=ui.files[0];if(ui.other[0]&&ui.other[0].errors){that.showError("选择的图片尺寸不符合要求，请确认后重试");return}if(!FileAPI.support.transform){that.showError("浏览器不支持Flash，请确认后重试")}else if(file){that.popup.init();that.popup.show().getImgDom().cropper({file:file,keySupport:false,bgColor:"#FFFFFF",maxSize:[500,400],minSize:[200,200],selection:"90%",onSelect:function(coords){that.$logo.fileapi("crop",file,coords)}});that.popup.getUploadBtn().off().on("click",function(){that.popup.hide();that.$logo.fileapi("upload")});that.$logo.children(".logo-preview").show().data("render",true);that.opts.onSelect&&that.opts.onSelect(evt,files)}},onBeforeUpload:function(evt,uploadInfo){this.$logo.find(".logo-browse").hide().end().find(".logo-uploading").show().find(".progress-text").removeClass("progress-finish").end().find(".progress-bar").show();this.opts.onBeforeUpload&&this.opts.onBeforeUpload(evt,uploadInfo)},onUpload:function(ext,uploadInfo){this.flag=false},onProgress:function(evt,uploadInfo){var per=uploadInfo.loaded/uploadInfo.total*100>>0;this.$logo.find(".bar").css("width",per+"%").end().find(".progress-text").text(per+"%");this.opts.onProgress&&this.opts.onProgress(evt,uploadInfo)},onFileComplete:function(evt,uploadInfo){var that=this;if(!uploadInfo.error&&uploadInfo.result&&uploadInfo.result.data&&uploadInfo.result.data.filehash){that.data=uploadInfo.result.data;that.$logo.find(".progress-text").addClass("progress-finish").text("").end().find(".progress-bar").hide();setTimeout(function(){that.$logo.find(".logo-uploading").hide().end().find(".logo-browse").show();that.flag=true},1e3)}else if(uploadInfo.result&&uploadInfo.result.data){that.showError(uploadInfo.result.data.errorinfo);that.uploadError()}else if(uploadInfo.status!=200){that.showError(uploadInfo.statusText);that.uploadError()}else{that.showError("上传失败，请稍后重试");that.uploadError()}that.opts.onFileComplete&&that.opts.onFileComplete(evt,uploadInfo)},destroy:function(){this.popup.destroy()},uploadError:function(){this.$logo.find(".logo-uploading").hide().end().find(".logo-browse").show().end().children(".logo-preview").html('<img alt="LOGO缩略图" src="'+this.opts.errImgPath+'">');this.flag=true},isIE:function(version){return navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.split(";")[1].replace(/[ ]/g,"")=="MSIE"+version+".0"},showError:function(text){var $err=$(".o-error",".o-logo");if(!$err.length){$err=$('<div class="o-error"></div>').appendTo(".o-logo")}$err.text(text).show();setTimeout(function(){$err.hide()},2*1e3)},getResponse:function(){return this.data},log:function(txt){console.log(txt)}});EventEmitter.bind(LogoUpload);return LogoUpload});
define("X+k3O",["dWD46","vJGdS"],function(tpl,EventEmitter){"use strict";var $=window.jQuery;var defaultObj={maxLength:200,value:"",texttip:"",errmsg:"",name:""};function TextAreaField(config){if(config&&config.container){this.init(config)}}$.extend(TextAreaField.prototype,{init:function(config){this.$container=$(config.container);this.$input=this.$container.find("textarea");this.$tip=this.$container.find("textarea+i");this.$errortip=this.$container.find(".error");this.validateOnBlur=!!config.validateOnBlur;this.keyName=config.keyName||this.$input.attr("name")||this.$container.attr("data-name");this.defaultValue=this.$input.val();this.maxLength=config.maxLength||30;this.validator=config.validator||null;this.apply(config.plugins||[]);this.bind();this.updateCharNumber()},apply:function(plugins){for(var i=0;i<plugins.length;++i){plugins[i].init(this)}},bind:function(){this.$input.on("keyup",this.updateCharNumber.bind(this));this.$input.blur(this.onBlurInternal.bind(this))},updateCharNumber:function(){if(this.$tip){this.$tip.html("<em>"+this.$input.val().length+"</em>/"+this.maxLength)}},validate:function(){if(!this.validator){return true}var ret=true;var validator;var val=this.$input.val();if($.isArray(this.validator)){for(var i=0;i<this.validator.length;++i){validator=this.validator[i];ret=validator.validate(val);if(!ret.result){break}}}else{ret=this.validator.validate(val)}if(!ret.result){this.setErrorMsg(ret.msg).showError()}else{this.setErrorMsg("").hideError()}return ret.result},getValue:function(){return this.getValueInternal()},getKeyValue:function(){return{name:this.keyName,value:this.getValue()}},setValue:function(val){this.$input.val(String(val));this.updateCharNumber()},setDefaultValue:function(val){this.defaultValue=String(val)},getDefaultValue:function(){return this.getDefaultValueInternal()},createDom:function(data){data=data||defaultObj;var html=tpl.template.replace(tpl.re,function($0,$1,position,str){return data[$1]});var frag=document.createDocumentFragment();frag.innerHTML=html;return frag.firstChild},showError:function(){this.$container.addClass("error");return this},hideError:function(){this.$container.removeClass("error");return this},setErrorMsg:function(msg){this.$errortip.text(msg);return this},destroy:function(){this.handlerManager=null;this.$input.off();this.$tip.off();this.$errortip.off();this.$container.remove();this.$input=null;this.$tip=null;this.$errortip=null;this.$container=null},onBlurInternal:function(){if(this.validateOnBlur){this.validate()}},getValueInternal:function(){return this.$input.val()},getDefaultValueInternal:function(){return this.defaultValue}});EventEmitter.bind(TextAreaField);return TextAreaField});
define("xyOvm",[],function(){"use strict";function AutoSave(callback,context){this.callback=callback;this.context=context||null}$.extend(AutoSave.prototype,{init:function(host){var me=this;host.onBlurInternal=function(){var ret;var val=this.$input.val();if(this.validateOnBlur){ret=this.validate()}if(ret&&val!==this.defaultValue){this.setDefaultValue(val);me.callback.call(me.context,host)}}}});return AutoSave});
define("aAoL5",[],function(){"use strict";function Encoding(){}$.extend(Encoding.prototype,{init:function(host){host.getValueInternal=function(){return encodeURIComponent(this.$input.val())};host.getDefaultValueInternal=function(){return encodeURIComponent(this.defaultValue)}}});return Encoding});
define("GB89f",["require","exports","module","merchant:common:api","merchant:common:msg"],function(require,exports,module){"use strict";var api=require("merchant:common:api"),msg=require("merchant:common:msg");var $=window.jQuery;var data=null;var defaultErrorMsg="未上传图片";var isOnline=Number(GlobalInfo.status)>=4;function inject(uploader){uploader.initFormAttrInternal=function(config){this.$container=$(config.container);this.$error=this.$container.parent().find(".error")};uploader.getKeyValue=function(){return data};uploader.validate=function(){var ret=!!data;if(ret){this.$error.hide();this.$error.text("")}else{this.$error.show();this.$error.text(defaultErrorMsg)}return ret};uploader.setStateInternal=function(imgUrlObj){if(imgUrlObj){data=imgUrlObj}else{}};uploader.bindInternal=function(){var me=this;function post(){var postData={bdstoken:GlobalInfo.bdstoken};if(GlobalInfo.app_id){postData.app_id=GlobalInfo.app_id}for(var n in data){if(data.hasOwnProperty(n)){postData["new_data["+n+"]"]=data[n]}}$.post(api.zhida.updateZhidaInfo,postData).done(function(res){if(res.error_code){me.$error.show();me.$error.text(res.error_msg)}else{me.$error.hide();me.$error.text("")}})}uploader.opts.onFileComplete=function(evt,uploadInfo){if(uploadInfo.result&&uploadInfo.result.data){var err_code=uploadInfo.result.data.error_code;if(err_code){me.$error.show();me.$error.text(msg[err_code]||uploadInfo.result.data.error_msg)}else{me.$error.hide();me.$error.text("");data=uploadInfo.result.data.filehash;if(!isOnline){post()}}}}}}module.exports=inject});
define("WZ8de",["require","exports","module","merchant:common:api","merchant:common:msg","giiX1"],function(require,exports,module){"use strict";var api=require("merchant:common:api"),msg=require("merchant:common:msg"),imageViewer=require("giiX1");var $=window.jQuery;var tmpl='<div class="o-thumbnail o-upload-done" data-order="{{index}}">'+'<img src="">'+'<div class="o-remove" style="display: none;"></div>'+'<div class="o-hover">'+'<span><div class="view-origin"></div></span>'+'<span><div class="re-upload"></div></span>'+"</div>"+"</div>";var isOnline=Number(GlobalInfo.status)>=4;function inject(uploader){uploader.initFormAttrInternal=function(config){this.$container=$(config.container);this.$thumbnail=null;this.$picker=this.$container.find(".o-filepicker");this.$error=this.$container.parent().find(".error");this.keyName=config.keyName;this.keyValue=(config.keyValue||[]).reverse()};uploader.getKeyValue=function(){return{name:this.keyName,value:JSON.stringify(this.keyValue)}};uploader.validate=function(){return true};uploader.setStateInternal=function(imgUrlObj){var me=this;if(imgUrlObj.length){this.keyValue=(imgUrlObj||[]).reverse();var html="",existData={};for(var i=0;i<this.keyValue.length;++i){html+=tmpl.replace("{{index}}",i);existData[i]={data:{filehash:this.keyValue[i]},errno:0}}this.$container.prepend(html);this.fileNumCount>=this.conf.fileNumLimit?this.hideUploader():this.showUploader();this.$thumbnail=this.$container.find(".o-thumbnail");this.$thumbnail.on("mouseenter",function(){$(this).children(".o-remove").show().end().children(".o-hover").show()}).on("mouseleave",function(){$(this).children(".o-remove").hide().end().children(".o-hover").hide()});this.$thumbnail.find("img").each(function(index){$(this).attr("src",me.keyValue[index])});this.initExist(this.$thumbnail,existData)}};uploader.bindInternal=function(){var me=this;function post(){var postData={bdstoken:GlobalInfo.bdstoken};postData["new_data["+me.keyName+"]"]=JSON.stringify(me.keyValue);$.post(api.zhida.updateZhidaInfo,postData).done(function(res){if(res.error_code){me.$error.show();me.$error.text(msg[res.error_code]||res.error_msg)}else{me.$error.hide();me.$error.text("")}})}this.uploader.on("uploadSuccess",function(file,response){if(response.error_code){me.$error.show();me.$error.text(msg[response.error_code]||response.error_msg)}else{me.$error.hide();me.$error.text("");var res=me.getRes();me.keyValue=[];for(var i=res.length-1;i>=0;i--){me.keyValue.push(res[i].data.filehash)}if(!isOnline){post()}}});this.on("remove",function(){var res=me.getRes();me.keyValue=[];for(var i=res.length-1;i>=0;i--){me.keyValue.push(res[i].data.filehash)}if(!isOnline){post()}});this.$container.delegate(".view-origin","click",function(){imageViewer.init();var imgurl=$(this).parent().parent().parent().find("img").attr("src");imageViewer.open(imgurl,1e5)})}}module.exports=inject});
define("G2x+6",["KJyx0","sL67K","gac0A","VutBd","Yjji0","J4uXr","Jn00n","m0pEn","RzrMf","vJGdS","merchant:common:api","merchant:common:msg","Y_OWB"],function(warning,slider,companyName,QRField,Uploader,InputField,AutoSave,Encoding,validator,EventEmitter,api,msg,inject){"use strict";var $=window.jQuery;var $view;var $next;var $cancel;var $agree;var $ssg;var inited=false;var isOnline=false;var isSSG=false;var state;var busLicUrl;var busLicNum;var orgInsUrl;var orgInsNum;var legalIdUrl;var legalIdBackUrl;var name;var legalIdNo;var email;var phone;var Org_Saved_Array={1:[],2:[]};function autoSaveCallback(inputfield){var postData={bdstoken:GlobalInfo.bdstoken};var kv=inputfield.getKeyValue();postData["data["+kv.name+"]"]=kv.value;$.post(api.zhida.updateQua,postData).done(function(res){if(res.error_code){inputfield.setErrorMsg(msg[res.error_code]||"返回错误");inputfield.showError()}else{inputfield.setErrorMsg("");inputfield.hideError()}})}function init(isShow){isShow=!!isShow;$view=$(".step-1");$next=$view.find(".buttons div:first-child");$cancel=$view.find(".buttons div:last-child");$agree=$view.find("#agree");$ssg=$view.find(".ssg");$.get(api.zhida.getQua,{bdstoken:GlobalInfo.bdstoken},function(data){if(data.error_code){}else{isOnline=Number(GlobalInfo.status)>=4;isSSG=Number(data.qua_from)>0;exports.trigger("bind:ssg",isSSG);if(isShow){show()}if(isSSG){$ssg.show();warning.init("");warning.hide();$view.find("form").hide()}else{$ssg.hide();$view.find("form").show();if((GlobalInfo.status==="3"||GlobalInfo.status==="7")&&data.audit_comment){warning.init(data.audit_comment);warning.show()}else{warning.init("");warning.hide()}slider.init(data.org_type);busLicUrl=new Uploader({server:"http://zmike86.zhida.baidu.com:8080/v3/upload",fileVal:"ufile",pick:{id:"#bus_lic_url",multiple:false},formData:{bdstoken:GlobalInfo.bdstoken,from_hash:1,upload_type:"identity_photo"},fileNumExist:data.bus_lic_url?1:0,fileNumLimit:1});busLicUrl.init();inject(busLicUrl);busLicUrl.initFormAttrInternal({container:".f-busLicUrl .o-webuploader",keyName:"bus_lic_url",keyValue:data.bus_lic_url||""});busLicUrl.setStateInternal(data.bus_lic_url||"");busLicUrl.bindInternal();busLicNum=new InputField({container:$(".f-busLicNum .o-inputfield"),validator:[validator.required,validator.illegalCharWithBracket],validateOnBlur:true,plugins:isOnline?[new Encoding]:[new AutoSave(autoSaveCallback),new Encoding]});busLicNum.setValue(data.bus_lic_num||"");busLicNum.setDefaultValue(data.bus_lic_num||"");orgInsUrl=new Uploader({server:"http://zmike86.zhida.baidu.com:8080/v3/upload",fileVal:"ufile",pick:{id:"#org_ins_url",multiple:false},formData:{bdstoken:GlobalInfo.bdstoken,from_hash:1,upload_type:"identity_photo"},fileNumExist:data.org_ins_url?1:0,fileNumLimit:1});orgInsUrl.init();inject(orgInsUrl);orgInsUrl.initFormAttrInternal({container:".f-orgInsUrl .o-webuploader",keyName:"org_ins_url",keyValue:data.org_ins_url||""});orgInsUrl.setStateInternal(data.org_ins_url||"");orgInsUrl.bindInternal();orgInsNum=new InputField({container:$(".f-orgInsNum .o-inputfield"),validator:[validator.required,validator.illegalCharWithBracket],validateOnBlur:true,plugins:isOnline?[new Encoding]:[new AutoSave(autoSaveCallback),new Encoding]});orgInsNum.setValue(data.org_ins_num||"");orgInsNum.setDefaultValue(data.org_ins_num||"");companyName.init(data.org_type,isOnline);companyName.setValue(data.company_name||"");companyName.setDefaultValue(data.company_name||"");legalIdUrl=new Uploader({server:"http://zmike86.zhida.baidu.com:8080/v3/upload",fileVal:"ufile",pick:{id:"#legal_id_url",multiple:false},formData:{bdstoken:GlobalInfo.bdstoken,from_hash:1,upload_type:"identity_photo"},fileNumExist:data.legal_id_url?1:0,fileNumLimit:1});legalIdUrl.init();inject(legalIdUrl);legalIdUrl.initFormAttrInternal({container:".f-legalIdUrl .o-webuploader",keyName:"legal_id_url",keyValue:data.legal_id_url||""});legalIdUrl.setStateInternal(data.legal_id_url||"");legalIdUrl.bindInternal();legalIdBackUrl=new Uploader({server:"http://zmike86.zhida.baidu.com:8080/v3/upload",fileVal:"ufile",pick:{id:"#legal_id_back_url",multiple:false},formData:{bdstoken:GlobalInfo.bdstoken,from_hash:1,upload_type:"identity_photo"},fileNumExist:data.legal_id_back_url?1:0,fileNumLimit:1});legalIdBackUrl.init();inject(legalIdBackUrl);legalIdBackUrl.initFormAttrInternal({container:".f-legalIdBackUrl .o-webuploader",keyName:"legal_id_back_url",keyValue:data.legal_id_back_url||""});legalIdBackUrl.setStateInternal(data.legal_id_back_url||"");legalIdBackUrl.bindInternal();name=new InputField({container:$(".f-name .o-inputfield"),validator:[validator.required,validator.specialChars],validateOnBlur:true,plugins:isOnline?[new Encoding]:[new AutoSave(autoSaveCallback),new Encoding]});name.setValue(data.name||"");name.setDefaultValue(data.name||"");legalIdNo=new InputField({container:$(".f-legalIdNo .o-inputfield"),validator:[validator.required,validator.id],validateOnBlur:true,maxLength:18,plugins:isOnline?[]:[new AutoSave(autoSaveCallback)]});legalIdNo.setValue(data.legal_id_no||"");legalIdNo.setDefaultValue(data.legal_id_no||"");email=new QRField({container:".f-email",autoSave:!isOnline,validateType:"email"});email.init(data.email||"");email.setDefaultValue("");phone=new QRField({container:".f-phone",autoSave:!isOnline,validateType:"phone"});phone.init(data.phone||"");phone.setDefaultValue("");Org_Saved_Array["1"]=[slider,busLicUrl,busLicNum,companyName,legalIdUrl,legalIdBackUrl,name,legalIdNo,email,phone];Org_Saved_Array["2"]=[slider,orgInsUrl,orgInsNum,companyName,legalIdUrl,legalIdBackUrl,name,legalIdNo,email,phone];setState(String(data.org_type))}exports.inited=true;bind()}},"json")}function setState(orgType){if(orgType==="1"){$(".f-busLicUrl").show();$(".f-busLicNum").show();$(".f-orgInsUrl").hide();$(".f-orgInsNum").hide();companyName.setState("1");state="1"}else if(orgType==="2"){$(".f-busLicUrl").hide();$(".f-busLicNum").hide();$(".f-orgInsUrl").show();$(".f-orgInsNum").show();companyName.setState("2");state="2"}}function show(){$view.show()}function hide(){$view.hide()}function saveAll(){var data=getFormData();return $.post(api.zhida.addQua,data)}function bind(){if(slider){slider.on("valuechange",function(e){if(e.newValue==="1"){setState("1")}else if(e.newValue==="2"){setState("2")}})}$next.click(function(){if(!$next.hasClass("btn-disabled")){if(isSSG){$view.hide();exports.trigger("step",2)}else{validate(function(result){if(result===true){if(isOnline){$view.hide();exports.trigger("step",2)}else{saveAll().done(function(data){if(data.error_code){}else{$view.hide();exports.trigger("step",2)}})}}})}}});$cancel.click(function(){if(isSSG){history.go(-1)}else{validate(function(result){if(result===true){if(isOnline){history.go(-1)}else{saveAll().done(function(data){if(data.error_code){}else{history.go(-1)}})}}})}});if($agree){$agree.change(function(){var checked=$agree[0].checked;if(checked){$next.removeClass("btn-disabled")}else{$next.addClass("btn-disabled")}})}}function validate(callback){$.when(email.validate(),phone.validate()).done(function(emailRet,phoneRet){debugger;email.checkCallback(emailRet);phone.checkCallback(phoneRet);emailRet=emailRet.result===1||emailRet[0].result===1;phoneRet=phoneRet.result===1||phoneRet[0].result===1;var validArr=state==="1"?[busLicUrl.validate(),busLicNum.validate(),companyName.validate(),legalIdNo.validate(),legalIdUrl.validate(),legalIdBackUrl.validate(),name.validate(),emailRet,phoneRet]:[orgInsUrl.validate(),orgInsNum.validate(),companyName.validate(),legalIdNo.validate(),legalIdUrl.validate(),legalIdBackUrl.validate(),name.validate(),emailRet,phoneRet];var ret=true;for(var i=0;i<validArr.length;++i){ret=ret&&validArr[i]}callback(ret)})}function getFormData(){var data={};var controls=Org_Saved_Array[state];for(var i=0;i<controls.length;++i){var kv=controls[i].getKeyValue();if(kv){data[kv.name]=kv.value}}data.bdstoken=GlobalInfo.bdstoken;return data}var exports={inited:inited,init:init,show:show,hide:hide,getFormData:getFormData};EventEmitter.inject(exports);return exports});
define("1v9R1",["merchant:common:api"],function(api){"use strict";var $=window.jQuery;var template='<div id="step-3-sample-container" class="hide">'+'<div class="step-3-sample-mask"></div>'+'<div class="step-3-sample">'+'<h3>查看预览效果</h3><span class="close">×</span>'+'<div class="frame-border">'+'<img src="" />'+'<div class="frame"></div>'+'<div class="text-ellipsis query"></div>'+'<div class="summary"></div>'+"</div>"+"</div>"+"</div>";var $container;var $close;var $icon;var $query;var $summary;function setData(data){$icon.attr("src",data.logo);$query.text(data.query);$summary.text(data.summary)}function show(){$container.show()}function hide(){$container.hide()}function init(){var frag=document.createDocumentFragment();$(template).appendTo(frag);document.body.appendChild(frag);$container=$("#step-3-sample-container");$close=$container.find(".close");$icon=$container.find("img");$query=$container.find(".query");$summary=$container.find(".summary");bind();var postData={bdstoken:GlobalInfo.bdstoken};if(GlobalInfo.app_id){postData.app_id=GlobalInfo.app_id}$.get(api.zhida.getZhidaInfo,postData,function(data){if(data.error_code){}else if(Number(data.count)===1||Number(data.count)===0){data=data.data[0]?data.data[0]:{};setData({logo:data.logo90||"",query:data.query||"",summary:data.summary||""})}})}function bind(){$close.click(function(){hide()})}return{init:init,hide:hide,show:show}});
define("xuK3r",["1v9R1"],function(previewDialog){"use strict";var $=window.jQuery;var $p;function setInformation(email,phone){$p.html("审核结果将在3个工作日内以邮件（"+email+"）短信（"+phone+"）<br/>"+"系统消息的方式通知到您，请注意查收。<span>查看预览效果</span>")}function init(){$p=$(".step-3 .inform p");bind();previewDialog.init()}function bind(){$(".step-3 .inform").delegate("span","click",function(){previewDialog.show()})}return{init:init,setInformation:setInformation}});
define("merchant:common:utils",[],function(){"use strict";function checkLogin(){if(!baidu){return}var countnumber=5,loginDialog=baidu.openapi.loginDialog,timer;if(!loginDialog||!countnumber){countnumber--;loginDialog=baidu.openapi.loginDialog;timer=setTimeout(function(){checkLogin()},500)}else{clearTimeout(timer);loginDialog.show()}}function pad(val,len){val=String(val);len=len||2;while(val.length<len){val="0"+val}return val}function formatDate(date,mask,utc){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g;var dateFormat=function(date,mask,utc){var masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};var i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};if(arguments.length==1&&Object.prototype.toString.call(date)==="[object String]"&&!/\d/.test(date)){mask=date;date=undefined}date=date?new Date(date):new Date;if(isNaN(date)){throw SyntaxError("invalid date")}mask=String(masks[mask]||mask||masks["default"]);if(mask.slice(0,4)==="UTC:"){mask=mask.slice(4);utc=true}var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:i18n.dayNames[D],dddd:i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:i18n.monthNames[m],mmmm:i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return mask.replace(token,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1)})};return dateFormat(date,mask,utc)}function timestamp_to_datetime(timestamp,format){var format=format||"yyyy-MM-dd hh:mm:ss";var now=new Date(parseInt(timestamp)*1e3);var o={"M+":now.getMonth()+1,"d+":now.getDate(),"h+":now.getHours(),"m+":now.getMinutes(),"s+":now.getSeconds(),"q+":Math.floor((now.getMonth()+3)/3),S:now.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(now.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format}function datetime_to_timestamp(datetime){var tmp_datetime=datetime.replace(/:/g,"-");tmp_datetime=tmp_datetime.replace(/ /g,"-");var arr=tmp_datetime.split("-");var now=new Date(Date.UTC(arr[0],arr[1]-1,arr[2],arr[3]-8,arr[4],arr[5]));return parseInt(now.getTime()/1e3)}return{checkLogin:checkLogin,formatDate:formatDate,stampToDateTime:timestamp_to_datetime,dateTimeToStamp:datetime_to_timestamp}});
define("+4pYu",["XpVb1","Yjji0","kek0p","J4uXr","Jn00n","m0pEn","X+k3O","xyOvm","aAoL5","RzrMf","vJGdS","merchant:common:api","merchant:common:msg","GB89f","WZ8de","G2x+6"],function(warning,Uploader,LogoUpload,InputField,AutoSave,Encoding,TextArea,TAAutoSave,TAEncoding,validator,EventEmitter,api,msg,logoInjector,brandInjector,step1){"use strict";var $=window.jQuery;var $view;var $prev;var $submit;var inited=false;var isOnline=false;var isSSG=false;var query;var summary;var logo;var brand;function autoSaveCallback(inputfield){var postData={bdstoken:GlobalInfo.bdstoken};var kv=inputfield.getKeyValue();postData["new_data["+kv.name+"]"]=kv.value;if(GlobalInfo.app_id){postData.app_id=GlobalInfo.app_id}$.post(api.zhida.updateZhidaInfo,postData).done(function(res){if(res.error_code){inputfield.setErrorMsg(msg[res.error_code]||"返回错误");inputfield.showError()}else{inputfield.setErrorMsg("");inputfield.hideError()}})}function init(isShow){isShow=!!isShow;$view=$(".step-2");$prev=$view.find(".buttons div:first-child");$submit=$view.find(".buttons div:last-child");var postData={bdstoken:GlobalInfo.bdstoken};if(GlobalInfo.app_id){postData.app_id=GlobalInfo.app_id}$.get(api.zhida.getZhidaInfo,postData,function(data){if(data.error_code){}else if(Number(data.count)===1||Number(data.count)===0){data=data.data[0]?data.data[0]:{};isOnline=Number(GlobalInfo.status)>=4;if(isShow){show()}if((GlobalInfo.status==="3"||GlobalInfo.status==="7")&&data.audit_comment){warning.init(data.audit_comment);warning.show()}else{warning.init("");warning.hide()}query=new InputField({container:$(".f-query .o-inputfield"),validator:[validator.required,validator.specialChars,validator.queryWord],validateOnBlur:true,plugins:isOnline?[new Encoding]:[new AutoSave(autoSaveCallback),new Encoding]});query.setValue(data.query||"");query.setDefaultValue(data.query||"");summary=new TextArea({container:$(".f-summary .o-textarea"),validator:[validator.required,validator.length(20,200)],validateOnBlur:true,maxLength:200,plugins:isOnline?[new TAEncoding]:[new AutoSave(autoSaveCallback),new TAEncoding]});summary.setValue(data.summary||"");summary.setDefaultValue(data.summary||"");logo=new LogoUpload({url:"http://zmike86.zhida.baidu.com:8080/v3/upload",paramName:"ufile",maxSize:FileAPI.MB*.3,pick:".f-logo .o-webuploader",data:{bdstoken:GlobalInfo.bdstoken,from_hash:1,upload_type:"zhidahao_icon"}});logo.init(data.logo90||"");logoInjector(logo);logo.initFormAttrInternal({container:".f-logo .o-webuploader"});logo.setStateInternal(data.logo90?{logo90:data.logo90||"",logo75:data.logo75||"",logo48:data.logo48||"",logo24:data.logo24||"",logo200:data.logo200||"",logo512:data.logo512||""}:null);logo.bindInternal();brand=new Uploader({server:"http://zmike86.zhida.baidu.com:8080/v3/upload",fileVal:"ufile",pick:{id:"#brand",multiple:true},formData:{bdstoken:GlobalInfo.bdstoken,from_hash:1,upload_type:"identity_photo"},fileSizeLimit:10*1024*1024,fileNumExist:data.brand_cert?data.brand_cert.length:0,fileNumLimit:10});brand.init();brandInjector(brand);brand.initFormAttrInternal({container:".f-brand .o-webuploader",keyName:"brand_cert",keyValue:data.brand_cert||[]});brand.setStateInternal(data.brand_cert?data.brand_cert:[]);brand.bindInternal();exports.inited=true;bind()}})}function bind(){$submit.click(function(){validate(function(result){if(result===true){if(isOnline&&!isSSG){submitAll().done(function(res){if(res.error_code){}else{location.reload()}})}else{saveAll().done(function(res){if(res.error_code){}else{location.reload()}})}}})});$prev.click(function(){$view.hide();exports.trigger("step",1)})}function validate(callback){var ret=query.validate()&&summary.validate()&&logo.validate()&&brand.validate();callback(ret)}function show(){$view.show()}function hide(){$view.hide()}function saveAll(){var data=getFormData();return $.post(api.zhida.addZhidaInfo,data)}function getFormData(){var data={};var controls=[query,summary,brand];for(var i=0;i<controls.length;++i){var kv=controls[i].getKeyValue();if(kv){data[kv.name]=kv.value}}$.extend(data,logo.getKeyValue());data.bdstoken=GlobalInfo.bdstoken;if(GlobalInfo.app_id){data.app_id=GlobalInfo.app_id}return data}function submitAll(){var data={};$.extend(data,step1.getFormData(),getFormData());return $.post(api.zhida.addQuaAndZhida,data)}function setSSG(b){isSSG=b}var exports={inited:inited,init:init,show:show,hide:hide,setSSG:setSSG};EventEmitter.inject(exports);return exports});
define("f08BG",["merchant:common:api","xuK3r"],function(api,inform){"use strict";var $=window.jQuery;var $view;var $build;var inited=false;var isOnline=false;function init(isShow){isShow=!!isShow;$view=$(".step-3");$build=$view.find(".builder button");if(isShow){show()}isOnline=Number(GlobalInfo.site_status)>=4;if(isOnline&&Number(GlobalInfo.site_status)!==7){$build.hide()}inform.init();inform.setInformation(GlobalInfo.email||"",GlobalInfo.phone||"");exports.inited=true;bind()}function bind(){$build.click(function(){if(GlobalInfo.site_status==="3"||GlobalInfo.site_status==="7"){location.href="/sh/site/detail"}else{location.href="http://cq01-lapp07.epc.baidu.com:8241/solution?sid="+GlobalInfo.sid}})}function show(){$view.show()}function hide(){$view.hide()}var exports={inited:inited,init:init,show:show,hide:hide};return exports});
require(["merchant:common:utils","G2x+6","+4pYu","f08BG"],function(utils,step1,step2,step3){"use strict";if(GlobalInfo.islogin!=="1"){utils.checkLogin()}if(GlobalInfo.step==="1"){step1.init(true)}else if(GlobalInfo.step==="2"){step1.init(false);step2.init(true)}else if(GlobalInfo.step==="3"){step3.init(true)}step1.on("step",function(step){if(step===2){step1.hide();if(step2.inited){step2.show()}else{step2.init(true)}}});step1.on("bind:ssg",function(isSSG){step2.setSSG(isSSG)});step2.on("step",function(step){if(step===1){step2.hide();if(step1.inited){step1.show()}else{step1.init(true)}}})});